# GitHubìœ¼ë¡œ í˜‘ì—… í”„ë¡œì íŠ¸í•˜ê¸° - GitHubì„ ëª¨ë¥´ëŠ” ë™ë£Œì™€ PR ë°˜ë³µí›ˆë ¨
* í•„ìˆ˜ì ì¸ ê²ƒë§Œ ë°˜ë³µ ì„¤ëª…í•©ë‹ˆë‹¤. í…œí”Œë¦¿ ì„¤ì • ë“±ì€ ìƒëµí•©ë‹ˆë‹¤.
* ë” ìƒì„¸í•œ ì˜ìƒ: https://youtu.be/6sBNPvxjyt0
* (íŒ€ì¥ + íŒ€ì›) íŒ€ í¸ì„± í›„ í”„ë¡œì„¸ìŠ¤
    1. ì»¤ë®¤ë‹ˆì¼€ì´ì…˜ ë„êµ¬ ì„ íƒ(ë””ìŠ¤ì½”ë“œ, ìŠ¬ë™, ì§€ë¼, ë…¸ì…˜, í”¼ê·¸ë§ˆ, í”¼ê·¸ì¼ ë“±) ë° ë£° ë§Œë“¤ê¸°
    2. ì˜¤ê±°ë‚˜ì´ì œì´ì…˜ ë§Œë“¤ê¸°(ìˆ˜ì—…ì€ ê°œì¸ repoì—ì„œ ì§„í–‰)
    3. GitHub ìœ„í‚¤(ì½”ë“œ ì»¨ë²¤ì…˜ ì„¸íŒ…)
    4. GitHub í”„ë¡œì íŠ¸(GitHub Project ìƒì„± ë° ê³µê°œ ì„¤ì •)
    5. GitHub ì´ìŠˆ ìƒì„±
* (íŒ€ì›) ì´ìŠˆ ìƒì„±(ì—…ë¬´ í• ë‹¹) í›„ í”„ë¡œì„¸ìŠ¤
    1. ì´ìŠˆ ìƒì„±
    2. ë¸Œëœì¹˜ ìƒì„±
    3. ì‘ì—… ì§„í–‰(commmitì€ ì—¬ëŸ¬ë²ˆ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.)
    4. PR ìƒì„±
    5. Merge
    6. ë¸Œëœì¹˜ ì‚­ì œ
    8. ë°˜ë³µ
* ë§ˆì§€ë§‰ì—ëŠ” Django í”„ë¡œì íŠ¸ë¥¼ ë§Œë“¤ì–´ì„œ ì§„í–‰í•©ë‹ˆë‹¤. ê¼­ Djangoë¥¼ ëª¨ë¥´ì…”ë„ ëˆˆìœ¼ë¡œ ë”°ë¼ì˜¤ì‹œë©´ ë©ë‹ˆë‹¤.
* ê°•ì˜ìë£Œ ì§§ì€ ë§í¬: https://weniv.link/O1f8Hd
* ê°•ì˜ìë£Œ ê¸´ ë§í¬: https://paullabworkspace.notion.site/GitHub-GitHub-PR-bceef81b948944049a95de5297a78195?pvs=4

```python
#############################

GitHub Wiki > create the first page í´ë¦­

í”„ë¡¬í”„íŠ¸
'''
GitHub Wikiì— Django mini í”„ë¡œì íŠ¸ ì»¨ë²¤ì…˜ ê°€ì´ë“œë¥¼ ì¤„ë ¤ê³  í•´. ì•„ë˜ì™€ ê°™ì´ ê°„ë‹¨í•˜ê²Œ ì‘ì„±í•´ì¤˜.

VSC ìµìŠ¤í…ì…˜ ê°€ì´ë“œ
Python ì½”ë”© ìŠ¤íƒ€ì¼ ê°€ì´ë“œ
ê¹ƒ ê´€ë¦¬, ê¹ƒëª¨ì§€ ë° ì»¤ë°‹ ê°€ì´ë“œ
'''

ë‹µë³€
'''
# Django Mini Project Convention Guide

ì´ ê°€ì´ë“œëŠ” Django mini í”„ë¡œì íŠ¸ë¥¼ ì§„í–‰í•  ë•Œ íŒ€ì›ë“¤ì´ ì§€ì¼œì•¼ í•  ì»¨ë²¤ì…˜ì— ëŒ€í•´ ì„¤ëª…í•©ë‹ˆë‹¤.

## 1. VSC ìµìŠ¤í…ì…˜ ê°€ì´ë“œ

í”„ë¡œì íŠ¸ë¥¼ ì§„í–‰í•  ë•Œ ë‹¤ìŒê³¼ ê°™ì€ VSC ìµìŠ¤í…ì…˜ì„ ì‚¬ìš©í•˜ëŠ” ê²ƒì„ ê¶Œì¥í•©ë‹ˆë‹¤.

- Python
- Django
- SQLite
- Git History
- GitLens
- Prettier
- Auto Rename Tag
- Live Server

## 2. Python ì½”ë”© ìŠ¤íƒ€ì¼ ê°€ì´ë“œ

Python ì½”ë“œë¥¼ ì‘ì„±í•  ë•ŒëŠ” PEP 8 ìŠ¤íƒ€ì¼ ê°€ì´ë“œë¥¼ ë”°ë¦…ë‹ˆë‹¤.

- ë“¤ì—¬ì“°ê¸°ëŠ” ìŠ¤í˜ì´ìŠ¤ 4ì¹¸ì„ ì‚¬ìš©í•©ë‹ˆë‹¤.
- ìµœëŒ€ ì¤„ ê¸¸ì´ëŠ” 79ìì…ë‹ˆë‹¤.
- í•¨ìˆ˜ì™€ í´ë˜ìŠ¤ ì‚¬ì´ì—ëŠ” ë¹ˆ ì¤„ì„ ë‘ ì¤„ ì¶”ê°€í•©ë‹ˆë‹¤.
- ëª¨ë“ˆ ì„í¬íŠ¸ëŠ” ì•ŒíŒŒë²³ ìˆœì„œë¡œ ì •ë ¬í•©ë‹ˆë‹¤.
- ë³€ìˆ˜ì™€ í•¨ìˆ˜ ì´ë¦„ì€ snake_caseë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤.
- í´ë˜ìŠ¤ ì´ë¦„ì€ PascalCaseë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤.

## 3. ê¹ƒ ê´€ë¦¬, ê¹ƒëª¨ì§€ ë° ì»¤ë°‹ ê°€ì´ë“œ

ê¹ƒ ê´€ë¦¬ ì‹œ ë‹¤ìŒ ê·œì¹™ì„ ë”°ë¦…ë‹ˆë‹¤.

- ë¸Œëœì¹˜ ì´ë¦„ì€ `feature/ê¸°ëŠ¥ëª…` í˜•ì‹ì„ ì‚¬ìš©í•©ë‹ˆë‹¤.
- ì»¤ë°‹ ë©”ì‹œì§€ëŠ” ì˜ì–´ë¡œ ì‘ì„±í•˜ë©°, ì œëª©ì€ 50ì ì´ë‚´ë¡œ ì œí•œí•©ë‹ˆë‹¤.
- ì»¤ë°‹ ë©”ì‹œì§€ ì œëª© ëì— ë§ˆì¹¨í‘œë¥¼ ì‚¬ìš©í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.
- ì»¤ë°‹ ë©”ì‹œì§€ ë³¸ë¬¸ì€ í•œ ì¤„ë‹¹ 72ì ì´ë‚´ë¡œ ì œí•œí•©ë‹ˆë‹¤.

ê¹ƒëª¨ì§€ëŠ” ë‹¤ìŒê³¼ ê°™ì´ ì‚¬ìš©í•©ë‹ˆë‹¤.

- âœ¨ (sparkles): ìƒˆë¡œìš´ ê¸°ëŠ¥ ì¶”ê°€
- ğŸ› (bug): ë²„ê·¸ ìˆ˜ì •
- ğŸ“ (memo): ë¬¸ì„œ ìˆ˜ì •
- ğŸ¨ (art): ì½”ë“œ ìŠ¤íƒ€ì¼ ê°œì„ 
- âš¡ï¸ (zap): ì„±ëŠ¥ ê°œì„ 
- ğŸ”§ (wrench): ì„¤ì • íŒŒì¼ ìˆ˜ì •
- ğŸšš (truck): íŒŒì¼ í˜¹ì€ ê²½ë¡œ ì´ë™/ì´ë¦„ ë³€ê²½
- ğŸ”¥ (fire): ì½”ë“œ í˜¹ì€ íŒŒì¼ ì œê±°
- âœ… (white_check_mark): í…ŒìŠ¤íŠ¸ ì¶”ê°€/ìˆ˜ì •
'''

############################

# GitHub repo 2ê°œ ìƒì„±
fe-weniv_blog
be-weniv_blog

#############################

git clone í•´ì„œ ë¡œì»¬ì— ì €ì¥ì†Œë¥¼ ê°€ì ¸ì˜µë‹ˆë‹¤. 
fe-weniv_blog > git clone https://github.com/paullabkorea/fe-weniv_blog.git .
be-weniv_blog > git clone https://github.com/paullabkorea/be-weniv_blog.git .

#############################

GitHub BE-Team repoì—ì„œ Project í´ë¦­ > New Project > ProjectName Project ìƒì„±
Project settings(ì˜¤ë¥¸ìª½ ìƒë‹¨ ...)ì—ì„œ Manage access í´ë¦­ > private ë³€ê²½ > Publicìœ¼ë¡œ ë³€ê²½

#############################

# 1cicle ì‹œì‘(ë‹¤ë§Œ dev ë¸Œëœì¹˜ëŠ” ë‹¨ 1ë²ˆë§Œ ë§Œë“¤ë©´ ë©ë‹ˆë‹¤.)

#############################


GitHub BE-Team repoì—ì„œ Issues í´ë¦­ > New Issue > IssueName Issue ìƒì„±
* Add a title: ê¸°ëŠ¥ ì´ë¦„ ìƒì„±
* Add a description: ê¸°ëŠ¥ ë‚´ìš© ìƒì„±
* Assignees: íŒ€ì› ì„ íƒ
* Labels: bug, duplicate, enhancement, good first issue, help wanted, invalid, question, wontfix
* Projects: Project ì„ íƒ

submit new issue í´ë¦­

Projectì—ì„œ Todo, In Progress, Done ìƒì„±
Developmentì—ì„œ Create a branch í´ë¦­ > BranchName ìƒì„± > Create branch í´ë¦­

#############################

ë³µì‚¬í•˜ë¼ê³  ëœ¹ë‹ˆë‹¤. ë³µì‚¬í•´ì£¼ì„¸ìš”. ì•„ì§ ì»¤ë©˜ë“œ ë¼ì¸ì— ë¶™ì—¬ë„£ì§„ ì•Šê² ìŠµë‹ˆë‹¤.
git fetch origin
git checkout 1-one

#############################

ì „ëµì€ GitHub Flow + develop branch ì „ëµì„ ì‚¬ìš©í•©ë‹ˆë‹¤.
ì „ëµìƒ í•„ìš”í•œ dev branchë¥¼ ë§Œë“¤ì–´ì¤ë‹ˆë‹¤.

git branch
git branch dev
git push --set-upstream origin dev

settings > General > Default branch > dev ì„ íƒ
// ì´ì œë¶€í„° mergeëŠ” develop branchë¡œ í•©ë‹ˆë‹¤.

#############################

git branch # í˜„ì¬ ë¸Œëœì¹˜ í™•ì¸
git fetch origin # ì›ê²© ì €ì¥ì†Œì˜ ë¸Œëœì¹˜ ì •ë³´ë¥¼ ê°€ì ¸ì˜´
git checkout 1-one # ë¸Œëœì¹˜ ìƒì„± ë° ì´ë™
git add . # ë³€ê²½ì‚¬í•­ì„ ìŠ¤í…Œì´ì§•
git commit -m "feat: test one" # ì»¤ë°‹
git push # ì›ê²© ì €ì¥ì†Œì— í‘¸ì‹œ


#############################

GitHub BE-Team repoì—ì„œ Compare&Pull requests í´ë¦­ ë˜ëŠ” Pull requests í´ë¦­ > New pull request í´ë¦­

add a title: feat: test one
add a description: feat: test one(ë‚´ìš©ì€ ì¢€ ë” ìƒì„¸í•˜ê²Œ ì‘ì„±í•´ì£¼ì„¸ìš”. tableê³¼ ê°™ì€ ê²ƒì„ ë„£ì–´ì£¼ì…”ë„ ì¢‹ìŠµë‹ˆë‹¤.)

Create pull request í´ë¦­


#############################

Merge pull request í´ë¦­
Confirm merge í´ë¦­
Delete branch í´ë¦­

#############################

// localì—ì„œ í•´ì•¼ í•˜ëŠ” ê²ƒ
git checkout dev
git pull
git branch -d 1-one

# VSCì— Source controlì— ê°€ì„œ view git graph(git log)ë¥¼ í´ë¦­
# ì›í•˜ëŠ” ë¸Œëœì¹˜ì— ë„¤ëª¨ ë°•ìŠ¤ì—ì„œ ë§ˆìš°ìŠ¤ ì˜¤ë¥¸ìª½ í´ë¦­í•˜ê³  delete branch í´ë¦­í•´ì„œ
# GUIë¡œë„ ë¸Œëœì¹˜ ì‚­ì œê°€ ê°€ëŠ¥í•©ë‹ˆë‹¤.

#############################

# 1cicle ë, ì´ë ‡ê²Œ 5ë²ˆ ë°˜ë³µí•©ë‹ˆë‹¤.

#############################

New issue ìƒì„±
add a title: init django settings
add a description: 
ì¥ê³  ì´ˆê¸° ì„¸íŒ…ì…ë‹ˆë‹¤. ì•„ë˜ì™€ ê°™ì€ ë‚´ìš©ì„ í¬í•¨í•©ë‹ˆë‹¤.
    - requirements.txt
    - .gitignore
    - settings.py
    - urls.py
    - README.md

#############################

Projectì—ì„œ Todo, In Progress, Done ìƒì„±
Developmentì—ì„œ Create a branch í´ë¦­ > BranchName ìƒì„± > Create branch í´ë¦­

#############################

ë³µì‚¬í•˜ë¼ê³  ëœ¹ë‹ˆë‹¤. ë³µì‚¬í•´ì£¼ì„¸ìš”.

git fetch origin
git checkout 3-init-django-settings
git branch

#############################

powershellë¡œ ì‘ì—…

###################################

íŒŒì´ì¬ ì„¤ì¹˜
VSCë¥¼ ì´ í´ë” ê¸°ì¤€ìœ¼ë¡œ ì—´ì—ˆìŠµë‹ˆë‹¤.
# 3.12ë²„ì „ìœ¼ë¡œ ìµœì‹ ë²„ì „ í™•ì¸í•´ì•¼ í•©ë‹ˆë‹¤.

python --version
mkdir viewset
cd viewset
python -m venv venv
.\venv\Scripts\activate
# source ./venv/bin/activate

pip install django
pip install pillow
pip install djangorestframework
pip install django-cors-headers

django-admin startproject config .

# freezeë¡œ requirements.txt ìƒì„±
pip freeze > requirements.txt

# .gitignore ìƒì„±(powershellì´ì–´ì„œ echo ëª…ë ¹ì–´ ì‚¬ìš©)
# https://www.toptal.com/developers/gitignore
echo "venv/`n__pycache__/`n*.pyc`ndb.sqlite3`n.DS_Store`n*/migrations/" > .gitignore

###################################

git add . # ë³€ê²½ì‚¬í•­ì„ ìŠ¤í…Œì´ì§•
git commit -m "feat: test one" # ì»¤ë°‹
git push # ì›ê²© ì €ì¥ì†Œì— í‘¸ì‹œ

#############################

BE-Team repoì—ì„œ Compare&Pull requests í´ë¦­ ë˜ëŠ” Pull requests í´ë¦­ > New pull request í´ë¦­
Mergeê¹Œì§€ ì§„í–‰

#############################

// localì—ì„œ í•´ì•¼ í•˜ëŠ” ê²ƒ
git checkout dev
git pull
git branch -d 3-init-django-settings

#############################

New issue ìƒì„±
add a title: init django app
add a description:
ì¥ê³  ì•±ì„ ìƒì„±í•©ë‹ˆë‹¤. ì•„ë˜ì™€ ê°™ì€ ë‚´ìš©ì„ í¬í•¨í•©ë‹ˆë‹¤.
    - app ìƒì„±
    - model ìƒì„±
    - serializer ìƒì„±
    - viewset ìƒì„±
    - url ì—°ê²°

#############################

Projectì—ì„œ Todo, In Progress, Done ìƒì„±

Developmentì—ì„œ Create a branch í´ë¦­ > BranchName ìƒì„± > Create branch í´ë¦­

#############################

ë³µì‚¬í•˜ë¼ê³  ëœ¹ë‹ˆë‹¤. ë³µì‚¬í•´ì£¼ì„¸ìš”.

git fetch origin
git checkout 4-init-django-app
git branch

#############################

python manage.py startapp posts

# => í˜¹ì‹œ setuptoolsê´€ë ¨ error ë°œìƒí•˜ë©´ ì…ë ¥í•˜ì„¸ìš”.
# pip install setuptools

#############################

git add . 
git commit -m 'posts ì•± ìƒì„±' 

###################################

ALLOWED_HOSTS = ['*']

INSTALLED_APPS = [
    'django.contrib.admin',
    'django.contrib.auth',
    'django.contrib.contenttypes',
    'django.contrib.sessions',
    'django.contrib.messages',
    'django.contrib.staticfiles',
    # custom app
    'posts',
    # install app
    'rest_framework',
    'corsheaders',
]

MIDDLEWARE = [
    "django.middleware.security.SecurityMiddleware",
    "django.contrib.sessions.middleware.SessionMiddleware",
    "django.middleware.common.CommonMiddleware",
    "django.middleware.csrf.CsrfViewMiddleware",
    "django.contrib.auth.middleware.AuthenticationMiddleware",
    "django.contrib.messages.middleware.MessageMiddleware",
    "django.middleware.clickjacking.XFrameOptionsMiddleware",
    "corsheaders.middleware.CorsMiddleware", # ì¶”ê°€
]

##

LANGUAGE_CODE = 'ko-kr'

TIME_ZONE = 'Asia/Seoul'

##

MEDIA_URL = '/media/'
MEDIA_ROOT = BASE_DIR / 'media'

###################################

git add .
git commit -m 'settings.py ì„¤ì • ìˆ˜ì •'

###################################
# config > urls.py

from django.contrib import admin
from django.urls import path, include
from django.conf import settings
from django.conf.urls.static import static

urlpatterns = [
    path("posts/", include("posts.urls")),
    path("admin/", admin.site.urls),
]

urlpatterns += static(settings.MEDIA_URL, document_root=settings.MEDIA_ROOT)


###################################

git add .
git commit -m 'urls.py ì„¤ì • ìˆ˜ì •'

###################################

posts app ì‘ì„±(models.py, urls.py, views.py, serializers.py, settings.py)

###################################
# posts > models.py

from django.db import models
from django.contrib.auth.models import User


class Post(models.Model):
    author = models.ForeignKey(User, on_delete=models.CASCADE, related_name="posts")
    caption = models.TextField()
    image = models.ImageField(upload_to="post_images/", blank=True) # ë‹¤ë¥¸ ì : blank=True
    created_at = models.DateTimeField(auto_now_add=True)

    def __str__(self):
        return f"{self.author} - {self.caption[:10]}"


class Comment(models.Model):
    post = models.ForeignKey(Post, on_delete=models.CASCADE, related_name="comments")
    author = models.ForeignKey(User, on_delete=models.CASCADE, related_name="comments")
    text = models.TextField()
    created_at = models.DateTimeField(auto_now_add=True)

    def __str__(self):
        return f"{self.author.username} - {self.text[:10]}"


class Like(models.Model):
    post = models.ForeignKey(Post, on_delete=models.CASCADE, related_name="likes")
    user = models.ForeignKey(User, on_delete=models.CASCADE, related_name="likes")
    created_at = models.DateTimeField(auto_now_add=True)

    class Meta:
        unique_together = ("post", "user")

    def __str__(self):
        return f"{self.user.username} likes {self.post.caption}"


###################################

git add .
git commit -m 'models.py ì‘ì„±'

###################################
# posts > urls.py (ìƒì„± í›„ ì €ì¥)

from django.urls import path, include
from rest_framework.routers import DefaultRouter
from .views import PostViewSet, CommentViewSet, LikeView

router = DefaultRouter()
router.register("posts", PostViewSet)
router.register("posts/(?P<post_pk>[^/.]+)/comments", CommentViewSet)

urlpatterns = [
    path("", include(router.urls)),
    path("posts/<int:post_id>/like/", LikeView.as_view(), name="post-like"),
]

###################################

git add .
git commit -m 'posts > urls.py ì‘ì„±'

###################################
# posts > views.py

from rest_framework import viewsets
from .serializers import PostSerializer, CommentSerializer
from .models import Comment, Post, Like
from rest_framework import permissions, views, response, status
from django.shortcuts import get_object_or_404


class PostViewSet(viewsets.ModelViewSet):
    queryset = Post.objects.all()
    serializer_class = PostSerializer
    permission_classes = [permissions.IsAuthenticated]

    def perform_create(self, serializer):
        serializer.save(author=self.request.user)


class CommentViewSet(viewsets.ModelViewSet):
    queryset = Comment.objects.all()
    serializer_class = CommentSerializer
    permission_classes = [permissions.IsAuthenticated]

    def perform_create(self, serializer):
        serializer.save(author=self.request.user)

    def get_queryset(self):
        return self.queryset.filter(post_id=self.kwargs["post_pk"])


class LikeView(views.APIView):
    permission_classes = [permissions.IsAuthenticated]

    def post(self, request, post_id):
        post = get_object_or_404(Post, id=post_id)
        like, created = Like.objects.get_or_create(post=post, user=request.user)

        if not created:
            return response.Response(status=status.HTTP_409_CONFLICT)

        return response.Response(status=status.HTTP_201_CREATED)

    def delete(self, request, post_id):
        post = get_object_or_404(Post, id=post_id)
        like = get_object_or_404(Like, post=post, user=request.user)
        like.delete()
        return response.Response(status=status.HTTP_204_NO_CONTENT)


###################################

git add .
git commit -m 'posts > views.py ì‘ì„±'

###################################
# posts > serializers.py

from rest_framework import serializers
from .models import Comment, Post, Like


class CommentSerializer(serializers.ModelSerializer):
    author_username = serializers.ReadOnlyField(source="author.username")

    class Meta:
        model = Comment
        fields = ["id", "post", "author", "author_username", "text", "created_at"]
        read_only_fields = ["author", "author_username"]


class PostSerializer(serializers.ModelSerializer):
    author_username = serializers.ReadOnlyField(source="author.username")
    comments = CommentSerializer(many=True, read_only=True)
    likes_count = serializers.IntegerField(source="likes.count", read_only=True)
    is_liked = serializers.SerializerMethodField()

    class Meta:
        model = Post
        fields = [
            "id",
            "author",
            "author_username",
            "caption",
            "image",
            "created_at",
            "comments",
            "likes_count",
            "is_liked",
        ]
        read_only_fields = ["author", "author_username", "likes_count", "is_liked"]

    def get_is_liked(self, obj):
        user = self.context["request"].user
        if user.is_authenticated:
            return Like.objects.filter(post=obj, user=user).exists()
        return False

###################################

git add .
git commit -m 'posts > serializers.py ì‘ì„± ë° posts ì•± ì„¤ì • ë'
git push

###################################

BE-Team repoì—ì„œ Compare&Pull requests í´ë¦­ ë˜ëŠ” Pull requests í´ë¦­ > New pull request í´ë¦­
Mergeê¹Œì§€ ì§„í–‰

###################################

# localì—ì„œ í•´ì•¼ í•˜ëŠ” ê²ƒ
git checkout dev
git pull
git branch -d 4-init-django-app

###################################

# Testë¥¼ ì§„í–‰í•˜ê¸° ìœ„í•´ ë³„ë„ ë¸Œëœì¹˜ ìƒì„±
git branch test
git checkout test

###################################

python manage.py makemigrations
python manage.py migrate
python manage.py runserver

python manage.py createsuperuser
leehojun
dlghwns1234!

###################################

ìš”ì¦˜ì€ apiê°€ ë˜ëŠ”ì§€ ì•ˆë˜ëŠ”ì§€ ChatGPTë‚˜ Caulde3ì—ì„œ í…ŒìŠ¤íŠ¸ë„ ê°€ëŠ¥í•©ë‹ˆë‹¤.

###################################

API Test - VSC Extension - Thunder Client

###################################
# URL
http://127.0.0.1:8000/posts/posts/

# Method
POST

# Auth
leehojun
dlghwns1234!

# Body
{
  "caption":"hello"
}

###################################
# URL
http://127.0.0.1:8000/posts/posts/

# Method
GET

###################################
# URL
http://127.0.0.1:8000/posts/posts/1/

# Method
PATCH

# Body
{
  "caption":"hello patch test"
}

###################################
# í…ŒìŠ¤íŠ¸ê°€ ëë‚¬ìœ¼ë‹ˆ ë‹¤ì‹œ dev ë¸Œëœì¹˜ë¡œ ëŒì•„ê°‘ë‹ˆë‹¤.
# test ë¸Œëœì¹˜ëŠ” ì‚­ì œí•©ë‹ˆë‹¤.

git add .
git commit -m 'test end'
git checkout dev
git branch -d test

###################################
# Routerì— URL ì¶”ê°€

from django.urls import path, include
from rest_framework.routers import DefaultRouter
from .views import PostViewSet, CommentViewSet, LikeView

router = DefaultRouter()
router.register("posts", PostViewSet)
router.register("posts/(?P<post_pk>[^/.]+)/comments", CommentViewSet)

urlpatterns = [
    path("", include(router.urls)),
    path("posts/<int:post_id>/like/", LikeView.as_view(), name="post-like"),
]

###################################
# views.py
from rest_framework import viewsets
from rest_framework.decorators import action
# ìƒëµ

class PostViewSet(viewsets.ModelViewSet):
    queryset = Post.objects.all()
    serializer_class = PostSerializer
    permission_classes = [permissions.IsAuthenticated]

    @action(detail=True, methods=["get"])
    def sampleone(self, request, pk=None):
        """
        detail=True: íŠ¹ì • ê²Œì‹œë¬¼ì— ëŒ€í•œ ì‘ì—…
        detail=False: ëª¨ë“  ê²Œì‹œë¬¼ì— ëŒ€í•œ ì‘ì—…
        /posts/{pk}/sampleone/: ê°œë³„ ê²Œì‹œë¬¼ì˜ ì œëª©ê³¼ ë‚´ìš©ì„ ë°˜í™˜í•˜ëŠ” ì—”ë“œí¬ì¸íŠ¸ (detail=True)
        """
        data = {"title": "hello", "content": "world"}
        return response.Response(data)

    @action(detail=False, methods=["get"])
    def sampletwo(self, request):
        """
        /posts/sampletwo/: ëª¨ë“  ê²Œì‹œë¬¼ì˜ ì œëª©ê³¼ ì‘ì„±ì ì´ë¦„ì„ ë°˜í™˜í•˜ëŠ” ì—”ë“œí¬ì¸íŠ¸ (detail=False)
        """
        data = [{"title": "hello 2", "author": "world 2"}]
        return response.Response(data)

###################################
# URL
http://127.0.0.1:8000/posts/posts/1/sampleone/

# Method
GET

###################################
# URL
http://127.0.0.1:8000/posts/posts/sampletwo/

# Method
GET

###################################
# views.py
# ì•„ë˜ì™€ ê°™ì´ ì¬ì •ì˜ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

class PostViewSet(viewsets.ModelViewSet):
    queryset = Post.objects.all()
    serializer_class = PostSerializer
    permission_classes = [permissions.IsAuthenticated]

    def list(self, request, *args, **kwargs):
        return response.Response("Hello, World!")


###################################
# ë§¤ì„œë“œë³„ ê¶Œí•œ ì¬ì •ì˜

class PostViewSet(viewsets.ModelViewSet):
    queryset = Post.objects.all()
    serializer_class = PostSerializer

    def list(self, request, *args, **kwargs):
        # self.permission_classes = [permissions.AllowAny]
        # self.permission_classes = [permissions.IsAuthenticated]
        return super().list(request, *args, **kwargs)


###################################
# ë‹¤ë¥¸ repoì— ì™€ì„œ ë˜‘ê°™ì€ ì‘ì—…ì„ ë°˜ë³µí•©ë‹ˆë‹¤. 
# ì´ìŠˆ ë“±ë¡
# Project ë“±ë¡(ê¸°ì¡´ì— ë“±ë¡í–ˆë˜ ê²ƒìœ¼ë¡œ ê´€ë¦¬ê°€ ê°€ëŠ¥í•©ë‹ˆë‹¤.)
# Branch ìƒì„±
# ì‘ì—… ì§„í–‰
# PR ìƒì„±
# Merge


```